<div class="bg-main-light shadow p-3 my-2 rounded-4">
  <H2 class="text-main"> Register Now </H2>

  <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()" class="mt-3">
    <div class="mb-3">
      <label for="name" class="form-label fw-bold">Name : </label>
      <input [ngClass]='{"is-valid": !registerForm.get("name")?.errors &&
      (registerForm.get("name")?.touched || registerForm.get("name")?.dirty),
      
      "is-invalid": registerForm.get("name")?.errors &&
      (registerForm.get("name")?.touched || registerForm.get("name")?.dirty)

      
     }'
        
        formControlName="name"
        type="text"
        class="form-control"
        id="name"
        placeholder="your name"
      />
      @if (registerForm.get("name")?.errors &&
      (registerForm.get("name")?.touched || registerForm.get("name")?.dirty)) {
      <div>
        @if (registerForm.get("name")?.getError("required")) {
        <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
          Name Is Required
        </div>
        } @else if (registerForm.get("name")?.getError("minlength")) {
        <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
          Name should be equal or more than 3 chra
        </div>
        } @else if (registerForm.get("name")?.getError("maxlength")) {
        <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
          Name should be equal or less than 20 chra
        </div>
        }
      </div>
      }
    </div>
    <div class="mb-3">
      <label for="email" class="form-label fw-bold">Email : </label>
      <input  [ngClass]='{"is-valid": !registerForm.get("email")?.errors &&
      (registerForm.get("email")?.touched || registerForm.get("email")?.dirty),
      
      "is-invalid": registerForm.get("email")?.errors &&
      (registerForm.get("email")?.touched || registerForm.get("email")?.dirty)

      
     }'
        formControlName="email"
        type="email"
        class="form-control"
        id="email"
        placeholder="your email"
      />
      @if (registerForm.get("email")?.errors &&
       (registerForm.get("email")?.touched || registerForm.get("email")?.dirty)) {
      <div>
        @if (registerForm.get("email")?.getError("required")) {
        <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
          Email Is Required
        </div>
        } @else if (registerForm.get("email")?.getError("email")) {
        <div class="alert alert-danger text-danger mt-2 fw-bold" role="alert">
          Email Not Vaild
        </div>
        }
      </div>
      }
    </div>
    <div class="mb-3">
      <label for="phone" class="form-label fw-bold">Phone Number : </label>
      <input   [ngClass]='{"is-valid": !registerForm.get("phone")?.errors &&
      (registerForm.get("phone")?.touched || registerForm.get("phone")?.dirty),
      
      "is-invalid": registerForm.get("phone")?.errors &&
      (registerForm.get("phone")?.touched || registerForm.get("phone")?.dirty)

      
     }'
        formControlName="phone"
        type="tel"
        class="form-control"
        id="phone"
        placeholder="your phone"
      />

      @if (registerForm.get("phone")?.errors &&
       (registerForm.get("phone")?.touched || registerForm.get("phone")?.dirty)) {
      <div>
        @if (registerForm.get("phone")?.getError("required")) {
        <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
          phone Is Required
        </div>
        } @else if (registerForm.get("phone")?.getError("pattern")) {
        <div class="alert alert-danger text-danger mt-2 fw-bold" role="alert">
          Accept only egypt phone numbers
        </div>
        }
      </div>
      }
    </div>
    <div class="mb-3">
      <label for="password" class="form-label fw-bold">Password : </label>
      <input [ngClass]='{"is-valid": !registerForm.get("password")?.errors &&
      (registerForm.get("password")?.touched || registerForm.get("password")?.dirty),
      
      "is-invalid": registerForm.get("password")?.errors &&
      (registerForm.get("password")?.touched || registerForm.get("password")?.dirty)

      
     }'
        formControlName="password"
        type="password"
        class="form-control"
        id="password"
        placeholder="your password"
      />
      @if (registerForm.get("password")?.errors &&
       (registerForm.get("password")?.touched || registerForm.get("password")?.dirty)) {
      <div>
        @if (registerForm.get("password")?.getError("required")) {
        <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
          Password Is Required
        </div>
        } @else if (registerForm.get("password")?.getError("pattern")) {
        <div class="alert alert-danger text-danger mt-2 fw-bold" role="alert">
          <p class="m-0">
            must be * Start with a letter (either uppercase or lowercase).
          </p>
          <p class="m-0">* Be between 6 and 9 characters in total.</p>
          <p class="m-0">
            * Can only contain letters (A-Z or a-z) and numbers (0-9)
          </p>
        </div>
        }
      </div>
      }
    </div>
    <div class="mb-3">
      <label for="repassword" class="form-label fw-bold">rePassword</label>
      <input  

        formControlName="rePassword"
        type="password"
        class="form-control"
        id="repassword"
        placeholder=" repassword"
      />
      @if (registerForm.getError("mismatch") &&
       (registerForm.get("rePassword")?.touched || registerForm.get("rePassword")?.dirty)) {
      <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
        Password confirmation is incorrect
      </div>
      }
    </div>

    <button
      
      class="btn-main ms-auto d-block m-2"
    >
      Register @if (isLoading) {
        <span> <i class="fas fa-spin fa-spinner"></i></span>
      } 
    </button>
    @if(msgError){
      <div class="alert alert-danger text-danger fw-bold mt-2" role="alert">
      {{msgError}} 
    </div>
    }
    
  </form>
  <!-- @if (isPageLoading) {
    <div class="loading">
     <i class="fas fa-spin fa-spinner  position-absolute top-50 end-50 fs-1"></i>
     <p class=" position-absolute center text-main fw-bold" >Redirect to Login page</p>

  </div>
  }
      -->
  
 
</div>
